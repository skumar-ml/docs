---
title: "Creating an Account"
---

## How-To

1. Navigate to the sign-up page.
2. Fill in the required fields (including a valid email address)
5. Create a password & submit the form to create your account.

<Info>
  A valid email address has the format **local-part@domain**, where the local part contains allowed characters (letters, numbers, dots, etc.) and the domain is a real domain with a valid extension (like `.com)`.
</Info>

The platform supports multiple account types to ensure proper role-based access and family linking.

### Parent Accounts

**Required Fields:** First & Last Name, Email Address

### Student Accounts

**Required Fields:** First & Last Name, Parent Name &  Email Address

**Note:** The parent email address is used to link the student account to a parent account via the `familyId`.

### Coach Accounts

**Required Fields:** First & Last Name, Email Address

<Warning>
  There is no way for an admin to create an account for a user. This is contemplated future functionality. If such a need arises, let the tech team know, and we can manually do this
</Warning>

## Technical Steps Involved in Account Creation

### 1. Memberstack

The account creation flow **starts inside Memberstack**. After the user submits the **Sign Up** form (via the Webflow UI), Memberstack creates the user record in **Memberstack’s internal database**. On sign-up, Memberstack triggers Step 2.

### 2. `POST /camp/createUserSignup `

Entry point API to initiate account signup and synchronize data between Webflow and Memberstack.

**Responsibilities:**

- Accepts signup payload: `name`, `email`, `accountType` (student | parent | coach), `signUpRef`. For more details please have a look [at the API reference](https://developers.memberstack.com/admin-rest-api/member-actions#create-member).
  - TODO: Eventually, we'll just point to the OpenAPI reference for input payload signature
- **Webflow CMS Insertion:** Formats the Memberstack payload into a Webflow's CMS-compatible structure. Inserts into Webflow CMS's **Member** collection and publishes the item live to the website.
- **Webflow ↔ Memberstack linkage:** Receives `itemId` from Webflow in the response. Finds the corresponding member in Memberstack via the payload's `memberId`.  Updates the Memberstack record with `webflow-member-id = itemId`.
- Invokes `createAccount` service to persist data into MongoDB, with different arguments passed depending on if sign-up was from `student` or `parent`.

After data source sync, the signup flow performs **CRM lead synchronization, referral state updates, and automated email**.

**CRM Lead Creation / Update**

- Once `createAccount` succeeds, the API receives the created `student_id` (if student account was created) and `parent_id` (always present).
- The system invokes the internal CRM endpoint: `/api/v1/external/create-lead`
- A lead is created or updated in the CRM with:`parent_id`,`student_id`, `tag_name = "account created"`, `ref_id = memberId` (Memberstack `memberId` used for traceability)

**Referral Status Update**

- If a parent account is created, the system checks the `referral_details` collection using the created parent’s MongoDB `_id` as `guestId`.
- If a referral record exists, the referral stage is updated: `referred_stage = "Signed_Up"` and `updated_on` timestamp is set

<Note>
  Purchase-based referral progression is handled later during payment completion (not at signup).
</Note>

**Invitation / Account-Exists Emails**

- When a signup email matches an existing invited user or a pre-existing account, SES is triggered via: `sendEmail.SendEmail.send_to_email(...)`
- This occurs within helper flows such as `setFamilyId()` when:
  - The user was previously invited
  - The system links the new signup to an existing family
- Email templates are fetched from the `email_content` collection and sent via SES.

<Note>
  TODO: Shubham needs to review the Account-Exists Email more in-depth. ^^
</Note>

### 3. `POST /camp/createAccount`

Creates or updates the user account record in MongoDB, based on if `student` or `parent` data was passed in.

**Responsibilities:**

- If **student or parent records already exist** without a `memberId`:
  - Then, updates the existing record with: `memberId`, `itemId`, `name`, `email`
- Else, creates a new record for the student or parent.
  - If record is a `student`, then link to the `parent` record (which is also created, if does not exist)
  - `familyId` is updated as [described in this doc.](/bdc/members/introduction)

## MongoDB Account Schema

### Account Document (Common Structure)

```
{
  "_id": ObjectId,
  "name": "Full Name",
  "email": "user@example.com",
  "itemId": "webflow_item_id",
  "familyId": "family_identifier",
  "accountType": "student | parent | coach",
  "memberId": "memberstack_member_id",
  "firstName": "First",
  "lastName": "Last",
  "createdOn": ISODate,
  "updatedOn": ISODate,
  "utm_source": "",
  "signUpRef": ""
}
```

### Differences by Account Type

| Account Type | Extra Fields Required      | Can Exist Without memberId | Update-on-Signup |
| :----------- | :------------------------- | :------------------------- | :--------------- |
| Student      | school, grade, gender, dob | Yes                        | Yes              |
| Parent       | phone                      | Yes                        | Yes              |
| Coach        | None                       | No                         | No               |

---

## Key Notes

Our flow ensures consistent data synchronization across Webflow, Memberstack, and MongoDB while supporting flexible signup entry points (direct signup, cart-based signup, and admin-created records).

- Webflow acts as the **source of truth for CMS items**
- MemberStack is linked to post-Webflow item creation
- MongoDB supports **partial pre-existing records** that are completed during signup
- `familyId` enables grouping of parent–student relationships