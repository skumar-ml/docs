---
title: "Management"
---

## Overview

TODO: (for Shubham) -- where people can see briefs & can stand-alone checkout. Difference between full & light

## Retool

### Adding or Editing Briefs

[This Retool page](https://bergendebate.retool.com/apps/b98e67d2-9528-11f0-a770-eb637de74341/Q3%6025/Manage%20Briefs/page1) allows admins to **view, add, and edit all available briefs** (called in this Retool page as topics) along with their **Full and Light versions** and pricing details.

![Image](/images/image-10.png)

The **left panel** displays a list of all added topics and the **right panel** shows the **details of the selected topic**, including description, price, PDF URL, and preview PDF URL.

<Note>
  Brief details are shown separately for **Full Version** and **Light Version** using tabs.
</Note>

### Adding a New Topic (Brief)

**To add a new brief**, click **“Add Topic”**, which triggers a pop-up. Enter basic details. Some important fields:

- **Display Order** controls which brief is shown first (or highest) on the website. Lower numbers place higher in the order.
- **URLs:** This field expects a publicly accessible PDF URL. Such URLs can also be generated by hosting a PDF on Webflow (or any public file hosting service) and copying the public CDN URL.

<Tip>
  The Preview URL can be created by copying the Brief PDF into a new version file and only keeping the first 5-10% of pages (to give potential customers a _taste_.
</Tip>

## Technical: Offerings Page

<Note>
  TODO: Katyayani, this is not what I want. I want you to be more technical. Specicfically, focus on what JS files control the dynamic generation, and what APIs get called.

  Anyone can look at the website and see the action buttons and elements in the card, so it's not important to describe in detail. **I think all of the below can be deleted**.
</Note>

## Briefs Page Controller

The dynamic behavior of the [Briefs](https://www.bergendebate.com/briefs) **listing page** is fully controlled by a single client-side JavaScript controller implemented as a class named `Briefs`.

This JavaScript is added via \*\*Webflow Page Settings → Custom Code (Before `</body>`**tag)**  and is executed when the page fires the `DOMContentLoaded` event.

## API Integration

### Primary API Used

**GET** `/getTopicsDetails`

**Full Endpoint**

```
https://xkopkui840.execute-api.us-east-1.amazonaws.com/prod/camp/getTopicsDetails
```

### API Responsibility

This API returns all metadata required to render the briefs page, including:

- `topicId`
- `topicName`
- `topic_order` (used for sorting)
- Short description / headings
- Topic image
- Full version details:
  - Price
  - Description
  - Preview PDF URL
  - Full PDF URL
- Light version details:
  - Price
  - Description
  - Preview PDF URL

No additional APIs are required for listing briefs or loading preview PDFs.

## Core JavaScript Functions

### `fetchData(endpoint, memberId = null)`

This function acts as a reusable API utility for the controller.

- Dynamically constructs the request URL using `apiBaseURL`
- Performs the network request using `fetch`
- Handles non-OK responses and API errors
- Returns parsed JSON data to the caller

All API communication for the briefs page flows through this method.

### `getBriefs()`

This is the primary orchestration function for page initialization.

- Displays the loading spinner before making the API call
- Calls `fetchData("getTopicsDetails")`
- Validates the API response
- Triggers rendering and event binding on successful data retrieval
- Ensures the spinner is hidden regardless of success or failure

This function is invoked automatically from the class constructor.

### `renderBriefs(briefs)`

Responsible for converting raw API data into rendered UI.

- Locates the briefs grid container in the DOM
- Clears any existing content
- Sorts briefs using `topic_order`
- Iterates over the sorted data set
- Creates and appends DOM nodes using `createBriefCard()`

This ensures display order is fully data-driven and backend-controlled.

### `createBriefCard(brief)`

Handles the creation of a **single brief card**.

- Generates the card’s HTML structure dynamically
- Injects topic title, description, image, and pricing
- Renders both Full and Light version pricing blocks
- Attaches data attributes (`data-topic-id`) used later for interaction handling

This function contains **no business logic**—only DOM construction based on provided data.

### `attachPreviewHandlers(briefs)`

Manages user interaction for preview functionality.

- Attaches click listeners to all Preview buttons
- Identifies the selected brief using `data-topic-id`
- Determines the correct preview PDF URL (Full preferred, fallback to Light)
- Displays the modal and loads the PDF into an iframe
- Shows and hides the spinner based on iframe load state

No additional API calls are made during preview; PDFs are loaded directly via provided URLs.

## Data & Control Flow Summary

### End-to-End Flow

1. **Page Load**
   - `DOMContentLoaded` fires
   - `Briefs` class is instantiated
2. **Data Fetch**
   - `getBriefs()` calls `GET /getTopicsDetails`
3. **Data Processing**
   - Response is validated and sorted
4. **UI Generation**
   - Cards are dynamically rendered via `renderBriefs()` → `createBriefCard()`
5. **User Interaction**
   - Preview clicks handled via `attachPreviewHandlers()`
   - PDFs loaded into modal iframe