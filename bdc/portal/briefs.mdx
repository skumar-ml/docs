---
title: "Briefs"
---

## Non-Technical

TODO: What users get to see for briefs

The [briefs](https://www.bergendebate.com/portal/my-briefs) page displays purchased briefs in a dropdown. Users can select a brief to preview its content and download the corresponding PDF using the Download PDF button.

![Image](/images/image-42.png)

## Admins (Retool)

TODO: What Retool pages can admin use for briefs. Link to doc that describes managing topics.

### Briefs Overview

There are two Retool pages for managing briefs:

The [briefs overview](https://bergendebate.retool.com/apps/11afbd74-b579-11f0-ad9c-bf8216ce2681/2025%20Phase%20B/Briefs%20Overview%20Page/page1) page displays all purchased briefs details along with **Light** and **Full** purchase counts for the selected topic.**Managing Topics** details are documented in the **Briefs Management** section. 

Doc link - bdc/checkout-systems/briefs/management

## Technical

Portal Briefs shows only briefs the member has already purchased (one JS file, one API).

**JS**

- File: **`portal-briefs.js`**; class: **`BriefManager`**.
- Parent page must pass **`baseUrl`** and **`memberId`**: `new BriefManager({ baseUrl: '...', memberId: '...' });`.

**API**

- **`GET getTopicsDetails?memberId={memberId}`** (class-service, **`getTopicsDetails.py`**).
- With **memberId**: returns only purchased topics from **`topic_payment_details`** + **`topic_details`** (topicName, topic_order, version, pdf_url, preview_pdf_url, purchase_date).
- Without memberId: returns full catalog (checkout; see [Briefs upsells](#)).

**Sidebar and main content**

- **My Briefs menu** has **no** hide/show logic—all users see the same sidebar; "My Briefs" is always visible.
- **Main content** depends on whether the member has purchased briefs:
  - **Has purchased briefs:** Show the briefs UI (dropdown, download link, PDF preview).
  - **No purchased briefs:** Show the empty state: message _"You haven't purchased any of our Briefs! Check out our briefs on topics like Cognitive Biases and Argumentation, created to strengthen your critical thinking with real-life examples and exercises."_ and a **See Briefs** button (links to the briefs checkout).

**Flow**

1. **JS (BriefManager)** — init and request
   - Caches DOM references: **`[data-brief="select-brief"]`** (dropdown), **`[data-brief="download-pdf"]`** (download link), **`[data-brief="pdf-preview"]`** (iframe), **`.pdf-briefs-main-container`** (main briefs panel), **`#half-circle-spinner`** (loading indicator).
   - Calls **`GET getTopicsDetails?memberId={memberId}`**
2. **API (getTopicsDetails.py)**
   - For the given **memberId**, reads **`topic_payment_details`** and **`topic_details`**.
   - Returns only topics the member has purchased, with: topicName, topic_order, version, pdf_url, preview_pdf_url, purchase_date.
3. **JS (BriefManager)** — after response
   - Stores the API response as **`$briefs`**.
   - **Content switch:** If **`$briefs`** has at least one item: show **`.pdf-briefs-main-container`** (briefs UI). If **`$briefs`** is empty: show the empty state (message + **See Briefs** button) and skip the steps below.
   - **Populate dropdown:** Fills **`[data-brief="select-brief"]`** with options from **`$briefs`** (e.g. by topicName), ordered by **topic_order**.
   - **Initial selection:** If there are items, selects the first (or default) brief and sets **`[data-brief="download-pdf"]`** href and **`[data-brief="pdf-preview"]`** iframe **src** to that brief’s **pdf_url**
   - **Dropdown change handler:** On **change** of **`[data-brief="select-brief"]`**, updates the download link **href** and the iframe **src** to the newly selected brief’s **pdf_url**
   - All of the above is client-side; no further API calls for viewing/downloading the selected brief.

<Note>
  TODO: Changes to be done...

  1. Make this more step-wise (e.g., first, JS file (through BriefManager) calls API. API does X and returns Y. The rest of the JS does A,B,C
  2. Explain under what conditions we are showing Briefs in the sidebar.
</Note>